(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,a){e.exports=a(378)},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},365:function(e,t,a){},366:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"user",function(){return Ue});var r=a(0),s=a.n(r),i=a(145),l=a.n(i),c=a(9),o=a(65),u=a.n(o),m=a(147),d=a(1),p=a(2),g=a(4),h=a(3),b=a(5),f=a(8),E=a(11),v={API_URL:"http://localhost:8000/api/",IMAGE_PREFIX:"http://localhost:8000/storage/",FALLBACK_IMAGE:"https://bulma.io/images/placeholders/128x128.png"},N=function(e){return window.config[e]||v[e]},k=a(148),_=a.n(k),y={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:8000/api/",t=_.a.create({baseURL:e,timeout:1e4});return{register:function(e){return t.post("/register",{user_name:e.user_name,email:e.email,password:e.password})},logIn:function(e){return t.post("/login",{email:e.email,password:e.password})},passwordCreate:function(e){return t.post("/password/create",{email:e.email})},passwordReset:function(e){return t.post("/password/reset",{reset_token:e.reset_token,password:e.password})},recipeCreate:function(e,a){return t.post("/recipes",{status:"test",instructions:e.instructions,title:e.title,tags:e.tags},{headers:{Authorization:"Bearer ".concat(a)}})},recipeIngredientCreate:function(e,a){return t.post("/recipe-ingredients",{ingredients:e.ingredients,recipe_id:e.recipe_id},{headers:{Authorization:"Bearer ".concat(a)}})},recipeIngredientUpdate:function(e,a){return t.put("/recipe-ingredients",{ingredients:e.ingredients,recipe_id:e.recipe_id},{headers:{Authorization:"Bearer ".concat(a)}})},recipeTags:function(e){return t.get("/recipe-tags",{},{headers:{Authorization:"Bearer ".concat(e)}})},recipeImage:function(e,a){return t.post("/recipes/image/store",{recipe_id:e.recipe_id,image:e.image},{headers:{Authorization:"Bearer ".concat(a)}})},recipesAllInfo:function(e){return t.get("/recipesAll",{},{headers:{Authorization:"Bearer ".concat(e)}})},recipeBySlug:function(e,a){return t.get("/recipes/".concat(a),{},{headers:{Authorization:"Bearer ".concat(e)}})},recipeUpdate:function(e,a){return t.put("/recipes/".concat(e.slug),{status:"test",instructions:e.instructions,title:e.title,tags:e.tags,slug:e.slug},{headers:{Authorization:"Bearer ".concat(a)}})},recipeDelete:function(e,a){return t.delete("/recipes/".concat(e),{},{headers:{Authorization:"Bearer ".concat(a)}})},daymealsByDate:function(e,a){return t.get("/daymeals/".concat(a),{},{headers:{Authorization:"Bearer ".concat(e)}})},daymealUpdate:function(e,a){return t.put("/daymeals-update",{date:e.date,meal_type:e.meal_type,recipe_id:e.recipe_id},{headers:{Authorization:"Bearer ".concat(a)}})},shoppingList:function(e,a){return t.get("/shopping-list/".concat(a),{},{headers:{Authorization:"Bearer ".concat(e)}})}}}},w=a(16),O=a(6),C=a.n(O),j=a(10),I=a(29),S=a.n(I),x=function(e){return s.a.createElement(E.b,{className:"".concat(e.className," button"),to:e.link},e.text)},R=(a(233),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={burgerIsActive:!1},a.handleToggleMenuClick=function(){a.setState({burgerIsActive:!a.state.burgerIsActive})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"header navbar",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{href:"/",className:"header__title navbar-item"},"Receptplaneraren"),s.a.createElement("a",{role:"button",href:"#",className:"navbar-burger burger "+(this.state.burgerIsActive?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:this.handleToggleMenuClick},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu "+(this.state.burgerIsActive?"is-active":"")},s.a.createElement("div",{className:"navbar-start"},s.a.createElement(E.b,{className:"navbar-item",to:"/"},"Home")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"buttons header__buttons"},this.props.buttons)))))}}]),t}(r.Component)),T=function(e){var t=[s.a.createElement(x,{key:1,text:"Sign Up",link:"/register",className:"header__button--yellow"}),s.a.createElement(x,{key:2,text:"Log In",link:"/login",className:"header__button--pink"})];return s.a.createElement(R,{buttons:t})},A=function(e){var t=[s.a.createElement(x,{key:1,text:"Create Recipe",link:"/recipe/create",className:"header__button--yellow"}),s.a.createElement(x,{key:2,text:"Browse Recipes",link:"/recipe/browse",className:"header__button--yellow"}),s.a.createElement(x,{key:3,text:"Settings",link:"#",className:"header__button--yellow"}),s.a.createElement(x,{key:4,text:"Log Out",link:"/logout",className:"header__button--pink"})];return s.a.createElement(R,{buttons:t})},L=(a(234),function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("footer",{className:"footer footer"},s.a.createElement("div",{className:"content has-text-centered"},s.a.createElement("p",{className:"footer__text"},e.copyrightText))))}),B=(a(235),function(e){switch(e){case 0:return"BREAKFAST";case 1:return"LUNCH";case 2:return"DINNER";default:return"UNSPECIFIED"}}),D=function(e){var t=e.data,a=t.recipe,n=t.meal_type,r=t.id;if(!a)return s.a.createElement("p",null,"Daymeal id ",r," is missing recipe");var i=B(n);return console.log(a),s.a.createElement("div",{className:"recipeitem"},s.a.createElement("div",{className:"content tabs__mealContainer columns"},s.a.createElement("div",{className:"column"},s.a.createElement("h3",null,i),s.a.createElement("h5",null,a.title||"No title"),s.a.createElement("h5",null,"Ingredients"),s.a.createElement("ul",null,a.recipe_ingredients.map(function(e,t){return s.a.createElement("li",{key:t},e.amount,e.measurement,e.ingredient.name)}))),s.a.createElement("div",{className:"column"},s.a.createElement("h5",null,"Instructions"),s.a.createElement("p",null,a.instructions)),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-image"},s.a.createElement("img",{src:N("IMAGE_PREFIX")+a.image||N("FALLBACK_IMAGE"),alt:""})),s.a.createElement("div",{className:"card-content"},a.recipe_tags.map(function(e,t){return s.a.createElement("li",{key:t},e.name)}))),s.a.createElement("br",null),s.a.createElement("button",{disabled:!0,className:"button"},"Browse new"))))},M=function(e){var t=e.mealType,a=B(t);return s.a.createElement("div",{className:"recipeitem"},s.a.createElement("div",{className:"content tabs__mealContainer columns"},s.a.createElement("div",{className:"column"},s.a.createElement("h3",null,a)),s.a.createElement("div",{className:"column"}),s.a.createElement("div",{className:"column"},s.a.createElement("button",{disabled:!0,className:"button"},"Browse new"))))},q=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.onChange,n=e.selected;return s.a.createElement("div",{className:"tabs"},t.map(function(e){var t="tabs__tabNav--".concat(e.value);return e.value===n&&(t="".concat(t," tabs__tabNav--selected")),s.a.createElement("button",{className:t,key:e.value,onClick:function(t){return a(e)}},e.label)}))}}]),t}(r.Component),F=(r.Component,function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={mondayDate:null,weekmeals:[],selectedDayOfWeek:0,isLoggedOut:!1,shoppingList:[]},a.handleWeekChange=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=a.state.mondayDate,1===n&&(r=r.clone().add(7,"days")),-1===n&&(r=r.clone().subtract(7,"days")),a.setState({mondayDate:r},function(){a.getDayMealsData()});case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getDayMealsData=Object(j.a)(C.a.mark(function e(){var t,n,r,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.api,n=a.state.mondayDate,r=n.format("YYYY-MM-DD"),e.next=5,t.daymealsByDate(a.props.user.access_token,r);case 5:if(401!==(s=e.sent).status){e.next=9;break}return a.setState({isLoggedOut:!0}),e.abrupt("return");case 9:if(s.ok){e.next=11;break}throw Error("DAYMEAL ERROR");case 11:a.setState({weekmeals:s.data.daymeals});case 12:case"end":return e.stop()}},e)})),a.handleTabNavChange=function(e){console.log(e),a.setState({selectedTab:e.value})},a.handleShoppingList=function(){var e=Object(j.a)(C.a.mark(function e(t){var n,r,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.mondayDate,r=a.props.api,e.next=5,r.shoppingList(a.props.user.access_token,n);case 5:if(401!==(s=e.sent).status){e.next=9;break}return a.setState({isLoggedOut:!0}),e.abrupt("return");case 9:if(s.ok){e.next=11;break}throw Error("SHOPPINGLIST ERROR");case 11:console.log(s.data.shoppinglist),a.setState({shoppingList:s.data.shoppinglist});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=S.a().startOf("isoWeek");this.setState({mondayDate:t},function(){e.getDayMealsData()})}},{key:"render",value:function(){var e=this,t=this.state,a=t.weekmeals,n=t.mondayDate;if(!n)return null;if(this.state.isLoggedOut)return s.a.createElement(f.a,{to:"/logout"});if(!this.props.user.access_token)return s.a.createElement(f.a,{to:"/login"});var r=n.isoWeek(),i=n.clone().add(this.state.selectedDayOfWeek,"days").format("YYYY-MM-DD"),l=a.filter(function(e){return e[0]===i}),c=(l.length>0?l[0]:[])[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(A,null),s.a.createElement("main",{className:"container"},s.a.createElement("div",{className:"start__Container columns"},s.a.createElement("div",{className:"column is-two-fifths"},s.a.createElement("h1",null,"Vecka ",r),s.a.createElement("span",{id:"left",className:"icon",onClick:function(t){return e.handleWeekChange(t,-1)}},s.a.createElement("i",{className:"fas fa-caret-left"})),s.a.createElement("span",{id:"right",className:"icon",onClick:function(t){return e.handleWeekChange(t,1)}},s.a.createElement("i",{className:"fas fa-caret-right"})),s.a.createElement("p",null,"Aenean iaculis gravida diam, et tincidunt diam elementum pulvinar. Curabitur dignissim tortor at blandit iaculis. Phasellus consequat velit quis leo pharetra, et ultricies turpis aliquet. Fusce pulvinar, leo faucibus facilisis ullamcorper, ligula mi interdum quam, vitae accumsan leo augue sed neque. Etiam sit amet ante malesuada, luctus est at, finibus nunc. Nam feugiat feugiat nulla ut blandit. Morbi eget porttitor mauris, sed lobortis justo. Sed eget metus at risus laoreet consectetur bibendum a nunc. Quisque quam magna, sollicitudin egestas orci a, congue aliquam nibh."),s.a.createElement("button",{className:"button",onClick:this.handleShoppingList},"Generate Shoppinglist"),s.a.createElement("br",null),this.state.shoppingList.map(function(e,t){return s.a.createElement("li",{key:t},e.amount,e.measurement,e.ingredient.name)})),s.a.createElement("div",{className:"column"},s.a.createElement(q,{items:[{label:"Monday",value:0},{label:"Tuesday",value:1},{label:"Wednesday",value:2},{label:"Thursday",value:3},{label:"Friday",value:4},{label:"Saturday",value:5},{label:"Sunday",value:6}],selected:this.state.selectedDayOfWeek,onChange:this.handleTabNavChange}),s.a.createElement(W,{meals:c,renderMissingMeal:function(e){return s.a.createElement(M,{key:e,mealType:e})},renderMealItem:function(e,t){return s.a.createElement(D,{key:e.id,data:e})}})))),s.a.createElement(L,{copyrightText:"Testtesttest"}))}}]),t}(r.Component)),P=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},null)(F),W=function(e){var t=(e.meals||[]).reduce(function(e,t){var a=e[t.meal_type]||[];return a=[].concat(Object(w.a)(a),[t]),e[t.meal_type]=a,e},new Array(3).fill([]));return s.a.createElement("div",{className:"daymeallist"},t.map(function(t,a){return t.length?t.map(function(t){return e.renderMealItem(t)}):e.renderMissingMeal(a)}),";")},U=(a(236),function(e){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-image"},s.a.createElement("figure",{className:"image is-4by3"},s.a.createElement("img",{src:e.image,alt:e.alt}))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},e.content)))}),Y=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){a.props.onClose()},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"is-active modal"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("section",{className:"modal-card-body"},s.a.createElement("h1",null,this.props.text),s.a.createElement("button",{className:"button is-success is-large",onClick:this.handleClick},"Ok"))))}}]),t}(s.a.Component),G=(a(237),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={modelIsOpen:!0},a.handleLoggedOutModalClose=function(){a.setState({modelIsOpen:!1})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.location.state||{};return this.props.isLoggedIn?s.a.createElement(f.a,{to:"/welcome"}):s.a.createElement("div",{className:"StartLoggedOut"},s.a.createElement(T,null),s.a.createElement("main",null,s.a.createElement("section",{className:"start__container--img"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},s.a.createElement("div",{className:"start__card--main card"},s.a.createElement("div",{className:"start__card--text card-content"},s.a.createElement("h2",{className:"start__card--title"},"Planera dina matvanor"),s.a.createElement("div",{className:"start__card--description"},"\xc4t det du vill n\xe4r du vill, g\xf6r din vardag enkel med Receptplaneraren."),s.a.createElement(E.b,{to:"/welcome"},s.a.createElement("button",{className:"start__card--button button"},"G\xe5 med nu"))))),s.a.createElement("div",{className:"column"}),s.a.createElement("div",{className:"column"})))),s.a.createElement("section",{className:"start__container--bg"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(U,{image:"/images/hermes-rivera-258743-unsplash.jpg",content:"Nulla condimentum orci dignissim ante volutpat feugiat. Phasellus sit amet viverra risus, non faucibus ligula. Fusce vel aliquet neque. Fusce libero justo, hendrerit id mollis vitae, pellentesque in nisi. Proin posuere egestas orci eget lobortis. Nunc risus est, venenatis lobortis nisl at, sodales egestas mi. Curabitur efficitur vehicula rhoncus.",alt:"Placeholder image"})),s.a.createElement("div",{className:"column"},s.a.createElement(U,{image:"/images/keenan-loo-27635-unsplash.jpg",content:"Nulla condimentum orci dignissim ante volutpat feugiat. Phasellus sit amet viverra risus, non faucibus ligula. Fusce vel aliquet neque. Fusce libero justo, hendrerit id mollis vitae, pellentesque in nisi. Proin posuere egestas orci eget lobortis. Nunc risus est, venenatis lobortis nisl at, sodales egestas mi. Curabitur efficitur vehicula rhoncus.",alt:"Placeholder image"})),s.a.createElement("div",{className:"column"},s.a.createElement(U,{image:"/images/luisa-schetinger-1164948-unsplash.jpg",content:"Nulla condimentum orci dignissim ante volutpat feugiat. Phasellus sit amet viverra risus, non faucibus ligula. Fusce vel aliquet neque. Fusce libero justo, hendrerit id mollis vitae, pellentesque in nisi. Proin posuere egestas orci eget lobortis. Nunc risus est, venenatis lobortis nisl at, sodales egestas mi. Curabitur efficitur vehicula rhoncus.",alt:"Placeholder image"})))))),s.a.createElement(L,{copyrightText:"Copyright 2019. Informational text."}),e.showLogOutModal&&this.state.modelIsOpen&&s.a.createElement(Y,{text:"You have been logged out.",onClose:this.handleLoggedOutModalClose}))}}]),t}(r.Component)),z=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{setToken:e.user.setToken}})(G),V=a(12),H=a(7),K=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"".concat(e.className," input"),type:e.type,placeholder:e.placeholder,name:e.name,value:e.value,onChange:e.onChange,onBlur:e.onBlur}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-envelope"})),s.a.createElement("span",{className:"icon is-small is-right"},s.a.createElement("i",{className:"fas fa-check"}))),e.error&&s.a.createElement("p",{className:"help is-danger"},e.error)))},X=(a(365),H.object().shape({email:H.string().email("E-mail is not valid!").required("E-mail is required!"),password:H.string().min(6,"Password has to be longer than 6 characters!").required("Password is required!")})),J=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.onSubmit;return s.a.createElement("div",{className:"LoginForm"},s.a.createElement(V.c,{initialValues:{email:"",password:"",general:""},validationSchema:X,onSubmit:function(t,a){e({password:t.password,email:t.email},a)},render:function(e){return s.a.createElement(V.b,null,e.errors.general&&s.a.createElement("p",null,e.errors.general),s.a.createElement(K,{name:"email",className:"",type:"email",placeholder:"Email",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&e.errors.email||""}),s.a.createElement(K,{name:"password",className:"",type:"password",placeholder:"Password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&e.errors.password||""}),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit",disabled:!e.isValid},"Log In"))))}}))}}]),t}(r.Component),Q=(a(366),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.api,n.setSubmitting(!0),e.next=4,r.logIn({email:t.email,password:t.password});case 4:if(s=e.sent,n.setSubmitting(!1),s.ok){e.next=9;break}return n.setErrors({general:"Ogiltigt anv\xe4ndarnamn/l\xf6senord"}),e.abrupt("return");case 9:a.props.setToken(s.data.access_token);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?s.a.createElement(f.a,{to:"/welcome"}):s.a.createElement("div",{className:"login columns"},s.a.createElement("div",{className:"login__container--img column"},s.a.createElement("div",{className:"login__container--left"},s.a.createElement("h2",{className:"login__brand"},"Receptplaneraren"))),s.a.createElement("div",{className:"login__container--bg column"},s.a.createElement("div",{className:"login__container--right"},s.a.createElement("h2",{className:"login__title"},"Log In"),s.a.createElement("p",{className:"login__info--small"},"Don't have an account? ",s.a.createElement(E.b,{to:"/register"},"Sign up"),"."),s.a.createElement(J,{onSubmit:this.handleSubmit}),s.a.createElement("p",{className:"login__info--small"},"Forgot password? ",s.a.createElement(E.b,{to:"/password/create"},"Click here.")))))}}]),t}(r.Component)),$=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{setToken:e.user.setToken}})(Q),Z=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.logOut()}},{key:"render",value:function(){return s.a.createElement(f.a,{to:{pathname:"/",state:{showLogOutModal:!0}}})}}]),t}(r.Component),ee=Object(c.b)(null,function(e){return{logOut:e.user.logOut}})(Z),te=(a(367),H.object().shape({user_name:H.string().required("User name is required!"),email:H.string().email("E-mail is not valid!").required("E-mail is required!"),password:H.string().min(6,"Password has to be longer than 6 characters!").required("Password is required!"),password_confirmation:H.string().oneOf([H.ref("password"),null],"Passwords must match").required("Password confirm is required"),consent:H.bool().test("consent","You have to agree with our Terms and Conditions!",function(e){return!0===e}).required("You have to agree with our Terms and Conditions!")})),ae=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.onSubmit;return s.a.createElement("div",{className:"RegisterForm"},s.a.createElement(V.c,{initialValues:{email:"",user_name:"",password:"",password_confirmation:"",consent:!1},validationSchema:te,onSubmit:function(t,a){e({password:t.password,email:t.email,user_name:t.user_name},a)},render:function(e){return s.a.createElement(V.b,null,s.a.createElement(K,{name:"user_name",className:"",type:"text",placeholder:"User name",value:e.values.user_name,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.user_name&&e.errors.user_name||""}),s.a.createElement(K,{name:"email",className:"",type:"email",placeholder:"Email",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&e.errors.email||""}),s.a.createElement(K,{name:"password",className:"",type:"password",placeholder:"Password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&e.errors.password||""}),s.a.createElement(K,{name:"password_confirmation",className:"",type:"password",placeholder:"Confirm password",value:e.values.password_confirmation,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password_confirmation&&e.errors.password_confirmation||""}),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("label",{className:"register__text--small  checkbox"},s.a.createElement(V.a,{className:"register__checkbox",name:"consent",type:"checkbox"}),"I agree to the ",s.a.createElement("a",{href:"/terms-and-conditions"},"terms and conditions"))),s.a.createElement("p",{className:"help is-success"},e.touched.consent&&e.errors.consent)),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit",disabled:!e.isValid},"Sign up"))))}}))}}]),t}(r.Component),ne=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.api,n.setSubmitting(!0),e.next=4,r.register({user_name:t.user_name,email:t.email,password:t.password});case 4:if(s=e.sent,n.setSubmitting(!1),s.ok){e.next=9;break}return n.setErrors(s.data),e.abrupt("return");case 9:a.props.setToken(s.data.access_token);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.user.access_token?s.a.createElement(f.a,{to:"/welcome"}):s.a.createElement("div",{className:"login columns"},s.a.createElement("div",{className:"login__container--img column"},s.a.createElement("div",{className:"login__container--left"},s.a.createElement("h2",{className:"login__brand"},"Receptplaneraren"))),s.a.createElement("div",{className:"login__container--bg column"},s.a.createElement("div",{className:"login__container--right"},s.a.createElement("h2",{className:"login__title"},"Sign Up"),s.a.createElement(ae,{onSubmit:this.handleSubmit}),s.a.createElement("p",{className:"login__info--small"},"Already have an account? ",s.a.createElement(E.b,{to:"/login"},"Log in."),"."))))}}]),t}(r.Component),re=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{setToken:e.user.setToken}})(ne),se=H.object().shape({password:H.string().min(6,"Password has to be longer than 6 characters!").required("Password is required!"),password_confirmation:H.string().oneOf([H.ref("password"),null],"Passwords must match").required("Password confirm is required")}),ie=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.match.params.token,s=a.props.api,n.setSubmitting(!0),e.next=5,s.passwordReset({reset_token:r,password:t.password});case 5:if(i=e.sent,n.setSubmitting(!1),i.ok){e.next=10;break}return n.setErrors({general:"Orgiltig l\xe4nk"}),e.abrupt("return");case 10:return n.resetForm(),n.setStatus(i.data.message),e.abrupt("return");case 13:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){if(this.props.isLoggedIn)return s.a.createElement(f.a,{to:"/welcome"});console.log(this.state);var e=this.handleSubmit;return s.a.createElement("div",{className:"login columns"},s.a.createElement("div",{className:"login__container--img column"},s.a.createElement("div",{className:"login__container--left"},s.a.createElement("h2",{className:"login__brand"},"Receptplaneraren"))),s.a.createElement("div",{className:"login__container--bg column"},s.a.createElement("div",{className:"login__container--right"},s.a.createElement("h2",{className:"login__title"},"Reset Password"),s.a.createElement(V.c,{initialValues:{password:"",password_confirmation:"",general:"",message:""},validationSchema:se,onSubmit:function(t,a){e({password:t.password},a)},render:function(e){return s.a.createElement(V.b,null,e.errors.general&&s.a.createElement("p",null,e.errors.general),e.status&&s.a.createElement("p",null,e.status),s.a.createElement(K,{name:"password",className:"",type:"password",placeholder:"Password",value:e.values.password,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&e.errors.password||""}),s.a.createElement(K,{name:"password_confirmation",className:"",type:"password",placeholder:"Confirm password",value:e.values.password_confirmation,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password_confirmation&&e.errors.password_confirmation||""}),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit",disabled:!e.isValid},"Update password"))))}}),s.a.createElement("p",{className:"login__info--small"},s.a.createElement(E.b,{to:"/login"},"Log in.")),s.a.createElement("p",{className:"login__info--small"},s.a.createElement(E.b,{to:"/register"},"Sign up.")))))}}]),t}(r.Component),le=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},null)(ie),ce=H.object().shape({email:H.string().email("E-mail is not valid!").required("E-mail is required!")}),oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.api,n.setSubmitting(!0),e.next=4,r.passwordCreate({email:t.email});case 4:if(s=e.sent,n.setSubmitting(!1),s.ok){e.next=9;break}return n.setErrors({general:"Ogiltig email"}),e.abrupt("return");case 9:return n.resetForm(),n.setStatus(s.data.message),e.abrupt("return");case 12:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){if(this.props.isLoggedIn)return s.a.createElement(f.a,{to:"/welcome"});var e=this.handleSubmit;return s.a.createElement("div",{className:"login columns"},s.a.createElement("div",{className:"login__container--img column"},s.a.createElement("div",{className:"login__container--left"},s.a.createElement("h2",{className:"login__brand"},"Receptplaneraren"))),s.a.createElement("div",{className:"login__container--bg column"},s.a.createElement("div",{className:"login__container--right"},s.a.createElement("h2",{className:"login__title"},"Create password reset"),s.a.createElement(V.c,{initialValues:{email:"",general:"",message:""},validationSchema:ce,onSubmit:function(t,a){e({email:t.email},a)},render:function(e){return s.a.createElement(V.b,null,e.errors.general&&s.a.createElement("p",null,e.errors.general),e.status&&s.a.createElement("p",null,e.status),s.a.createElement(K,{name:"email",className:"",type:"email",placeholder:"Email",value:e.values.email,onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&e.errors.email||""}),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit",disabled:!e.isValid},"Reset password"))))}}),s.a.createElement("p",{className:"login__info--small"},s.a.createElement(E.b,{to:"/login"},"Log in.")),s.a.createElement("p",{className:"login__info--small"},s.a.createElement(E.b,{to:"/register"},"Sign up.")))))}}]),t}(r.Component),ue=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},null)(oe),me=(a(368),function(e){return s.a.createElement("div",{className:"RecipeTags"},e.tags.map(function(t){var a=e.selectedTags.includes(t.id);return s.a.createElement("button",{className:a?"button selected":"button not-selected",onClick:function(a){return function(t,a){t.preventDefault(),e.onToggleTag(a)}(a,t)},key:t.id},t.name)}))}),de=a(69),pe=a(49),ge=a(152),he=(a(369),[{label:"ml",type:0},{label:"l",type:0},{label:"tbs",type:0},{label:"fl-oz",type:0},{label:"cup",type:0},{label:"pnt",type:0},{label:"qt",type:0},{label:"gal",type:0},{label:"mg",type:1},{label:"g",type:1},{label:"kg",type:1},{label:"oz",type:1},{label:"lb",type:1},{label:"piece",type:2}]),be=function(e){var t=function(t){e.onChange;var a=Object(ge.a)(e,["onChange"]);e.onChange(e.index,Object(pe.a)({},a,Object(de.a)({},t.currentTarget.name,t.currentTarget.value)))};return s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{type:"text",name:"amount",className:"IngredientsInput__Amount input",placeholder:"Amount",value:e.amount,onChange:t})),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"IngredientsInput__Measure select"},s.a.createElement("select",{name:"measurement",value:e.measurement||void 0,className:"IngredientsInput__Select",onChange:t},he.map(function(e,t){return s.a.createElement("option",{key:t},e.label)})))),s.a.createElement("div",{className:"control is-expanded"},s.a.createElement("input",{type:"text",className:"IngredientsInput__Ingredient input",name:"ingredient",placeholder:"Ingredient",value:e.ingredient,onChange:t})),s.a.createElement("div",{className:"control"},s.a.createElement("button",{onClick:function(t){t.preventDefault(),e.onDelete(e.index)},className:"button is-danger"},"Delete")))},fe={amount:0,measurement:"",ingredient:""},Ee=function(e){var t=function(t,a){var n=[].concat(Object(w.a)(e.items.slice(0,t)),[a],Object(w.a)(e.items.slice(t+1)));e.onChange(n)},a=function(t){console.log("delete");var a=[].concat(Object(w.a)(e.items.slice(0,t)),Object(w.a)(e.items.slice(t+1)));e.onChange(a)};return s.a.createElement("div",null,s.a.createElement("div",null,e.items.map(function(e,n){return s.a.createElement(be,Object.assign({},e,{key:n,index:n,onChange:t,onDelete:a}))})),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",onClick:function(t){t.preventDefault(),e.onChange([].concat(Object(w.a)(e.items),[fe]))}},"Add row +"))))},ve=(a(370),H.object().shape({title:H.string().required("Title is required!"),instructions:H.string().required("Instructions is required!"),ingredients:H.array().required("Ingredients are required!")})),Ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).handleAddItem=function(e){e.preventDefault();var t=a.state.ingredients;t=[].concat(Object(w.a)(t),[{amount:0,measurement:"",ingredient:""}]),a.setState({ingredients:t})},a.handleIngredientChange=function(e){a.setState({ingredients:e})},a.handleInputFileChange=function(e){var t=e.target.files||[];if(t.length>0){var n=t[0],r=new FileReader;r.onload=function(e){"string"===typeof r.result&&a.setState({image:r.result})},r.readAsDataURL(n)}},a.state={title:"",image:"https://bulma.io/images/placeholders/128x128.png",instructions:"",ingredients:[fe]},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onSubmit,a={title:"",image:"",instructions:"",ingredients:[fe]};return s.a.createElement("div",{className:"RecipeForm"},s.a.createElement(V.c,{initialValues:a,validationSchema:ve,onSubmit:function(a,n){console.log("onSubmit!"),t({title:a.title,image:e.state.image,instructions:a.instructions,ingredients:a.ingredients},n)},render:function(t){return s.a.createElement(V.b,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("figure",{className:"image is-128x128"},s.a.createElement("img",{id:"imagePreview",src:e.state.image,alt:""}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"file is-boxed"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:e.handleInputFileChange,accept:"image/*"}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Choose an image\u2026"))))),t.errors.image&&s.a.createElement("p",{className:"help is-danger"},t.errors.image)),s.a.createElement("label",null,"Title"),s.a.createElement(K,{name:"title",className:"",type:"text",placeholder:"Title",value:t.values.title,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.title&&t.errors.title||""}),s.a.createElement("label",null,"Ingredients"),s.a.createElement(Ee,{items:t.values.ingredients,onChange:function(e){return t.setFieldValue("ingredients",e)}}),t.errors.ingredients&&s.a.createElement("p",{className:"help is-danger"},t.errors.ingredients),s.a.createElement("div",{className:"control"},s.a.createElement("label",null,"Instructions"),s.a.createElement(V.a,{component:"textarea",className:"textarea",name:"instructions",value:t.values.instructions,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.instructions&&t.errors.instructions||"",placeholder:"Instructions"}),t.errors.instructions&&s.a.createElement("p",{className:"help is-danger"},t.errors.instructions)),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit"},"Create"))),s.a.createElement("button",{className:"button",disabled:!0},"Preview"))}}))}}]),t}(r.Component),ke=(a(371),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={tags:[],selectedTags:[]},a.handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s,i,l;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("CreateRecipe.handleSubmit"),console.log(t),r=a.props.api,n.setSubmitting(!0),e.next=6,r.recipeCreate({instructions:t.instructions,title:t.title,tags:a.state.selectedTags},a.props.user.access_token);case 6:if(s=e.sent,n.setSubmitting(!1),s.ok){e.next=11;break}return n.setErrors({general:"Fel, kunde inte spara recept"}),e.abrupt("return");case 11:return n.setSubmitting(!0),i=s.data.recipe.id,e.next=15,r.recipeIngredientCreate({ingredients:t.ingredients,recipe_id:i},a.props.user.access_token);case 15:return e.next=17,r.recipeImage({image:t.image,recipe_id:i},a.props.user.access_token);case 17:if(l=e.sent,n.setSubmitting(!1),l.ok){e.next=22;break}return n.setErrors({general:"Fel, kunde inte spara bild"}),e.abrupt("return");case 22:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleToggleTag=function(e){var t=a.state.selectedTags;t=t.includes(e.id)?t.filter(function(t){return t!==e.id}):[e.id].concat(Object(w.a)(t)),a.setState({selectedTags:t})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.api,e.next=3,t.recipeTags(this.props.user.access_token);case 3:if(a=e.sent,this.setState({tags:a.data}),a.ok){e.next=8;break}return console.log("TAG ERRORRR"),e.abrupt("return");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.isLoggedIn?s.a.createElement("div",{className:"CreateRecipe"},s.a.createElement(A,null),s.a.createElement("main",{className:"container"},s.a.createElement("div",{className:"CreateRecipe__Container columns"},s.a.createElement("div",{className:"CreateRecipe__Container--Left column is-two-fifths"},"Create Recipe and tabs",s.a.createElement(me,{tags:this.state.tags,selectedTags:this.state.selectedTags,onToggleTag:this.handleToggleTag})),s.a.createElement("div",{className:"CreateRecipe__Container--Right column"},s.a.createElement(Ne,{onSubmit:this.handleSubmit})))),s.a.createElement(L,{copyrightText:""})):s.a.createElement(f.a,{to:"/"})}}]),t}(r.Component)),_e=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{}})(ke),ye=function(e){return s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{className:"select",name:e.name,value:e.value,onChange:e.onChange,onBlur:e.onBlur},e.options.map(function(e,t){return s.a.createElement("option",{key:t},e)}))))},we=H.object().shape({week:H.number().required("Week is required!"),day:H.string().required("Day is required!"),meal:H.string().required("Meal type is required!")}),Oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={weekList:[],dayList:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],currentWeek:S.a().isoWeek(),currentDay:S.a().isoWeekday(S.a().isoWeekday()).format("dddd"),mealList:["Breakfast","Lunch","Dinner"],currentMeal:"Breakfast"},a.handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s,i,l,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("AddDayMealModal.handleSubmit"),console.log(t),r=y.create(),n.setSubmitting(!0),s=S.a().day(t.day).week(t.week).format("YYYY-MM-DD HH:mm:ss"),e.t0=t.meal,e.next="Breakfast"===e.t0?8:"Lunch"===e.t0?10:"Dinner"===e.t0?12:14;break;case 8:return i=0,e.abrupt("break",16);case 10:return i=1,e.abrupt("break",16);case 12:return i=2,e.abrupt("break",16);case 14:return i=0,e.abrupt("break",16);case 16:return l=a.props.recipe.id,console.log(s),console.log(i),console.log(l),e.next=22,r.daymealUpdate({date:s,meal_type:i,recipe_id:l},a.props.user.access_token);case 22:if(c=e.sent,n.setSubmitting(!1),c.ok){e.next=27;break}return n.setErrors({general:"Could not save day meal"}),e.abrupt("return");case 27:a.props.onClose();case 28:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleClick=function(e){(0,a.props.onClose)()},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){for(var e=S.a().isoWeeksInYear(),t=[],a=1;a<=e;a++)t=[].concat(Object(w.a)(t),[a]);this.setState({weekList:t})}},{key:"render",value:function(){var e=this,t=this.handleSubmit,a={week:this.state.currentWeek,day:this.state.currentDay,meal:this.state.currentMeal};return s.a.createElement("div",{className:"is-active modal"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("section",{className:"modal-card-body"},s.a.createElement(V.c,{initialValues:a,validationSchema:we,onSubmit:function(e,a){t({week:e.week,day:e.day,meal:e.meal},a)},render:function(t){return s.a.createElement(V.b,null,s.a.createElement("h1",null,e.props.text),s.a.createElement(ye,{name:"week",options:e.state.weekList,value:t.values.week,onChange:t.handleChange,onBlur:t.handleBlur}),t.errors.week&&s.a.createElement("p",{className:"help is-danger"},t.errors.week),s.a.createElement(ye,{name:"day",options:e.state.dayList,value:t.values.day,onChange:t.handleChange,onBlur:t.handleBlur}),t.errors.day&&s.a.createElement("p",{className:"help is-danger"},t.errors.day),s.a.createElement(ye,{name:"meal",options:e.state.mealList,value:t.values.meal,onChange:t.handleChange,onBlur:t.handleBlur}),t.errors.meal&&s.a.createElement("p",{className:"help is-danger"},t.errors.meal),s.a.createElement("button",{className:"button is-info",onClick:e.handleClick},"Close"),s.a.createElement("button",{className:"button is-success",type:"submit"},"Add"))}}))))}}]),t}(s.a.Component),Ce=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},null)(Oe),je=(a(372),function(e){return s.a.createElement("div",{className:"level"},s.a.createElement("div",{className:"level-left"},s.a.createElement("div",{className:"RecipeListItem content"},s.a.createElement("h2",{className:"levelHeader"},e.recipe.title),s.a.createElement("p",{className:"levelContent"},e.recipe.instructions),s.a.createElement(E.b,{className:"levelLink",to:"/recipe/detail/".concat(e.recipe.slug)},"Read more"),s.a.createElement("button",{className:"levelLink",onClick:function(){e.onOpenModal(e.recipe)}},"Add to week"))),s.a.createElement("div",{className:"level-right"},s.a.createElement("figure",{className:"level-item image is-128x128"},s.a.createElement("img",{alt:"",src:N("IMAGE_PREFIX")+e.recipe.image||N("FALLBACK_IMAGE")}))),s.a.createElement("hr",{className:"levelHr"}))}),Ie=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={tags:[],selectedTags:[],recipes:[],modalIsOpen:!1,clickedRecipe:{instructions:"",title:"",image:"",slug:"",tags:[],id:0}},a.handleOpenModal=function(e){a.setState({modalIsOpen:!0}),a.setState({clickedRecipe:e})},a.handleModalClose=function(){a.setState({modalIsOpen:!1})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(C.a.mark(function e(){var t,a,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.api,e.next=3,t.recipeTags(this.props.user.access_token);case 3:if(a=e.sent,this.setState({tags:a.data}),a.ok){e.next=8;break}return console.log("TAG ERRORRR"),e.abrupt("return");case 8:return e.next=10,t.recipesAllInfo(this.props.user.access_token);case 10:if(n=e.sent,console.log(n),this.setState({recipes:n.data.recipes}),a.ok){e.next=16;break}return console.log("RECIPE ERRORRR"),e.abrupt("return");case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.isLoggedIn?s.a.createElement("div",{className:"BrowseRecipes"},s.a.createElement(A,null),s.a.createElement("main",{className:"container"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"Bl\xe4ddra bland recept. Taggar f\xf6r filtrering."),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"level"},s.a.createElement("div",{className:"level-left"}),s.a.createElement("div",{className:"level-right"},s.a.createElement("div",{className:"level-item"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Find a post"})),s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button"},"Search")))))),this.state.recipes.map(function(t,a){return s.a.createElement(je,{key:a,recipe:t,onOpenModal:e.handleOpenModal})})))),s.a.createElement(L,{copyrightText:""}),this.state.modalIsOpen&&s.a.createElement(Ce,{text:"Add meal to weekly plan",recipe:this.state.clickedRecipe,onClose:this.handleModalClose})):s.a.createElement(f.a,{to:"/"})}}]),t}(r.Component),Se=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{}})(Ie),xe=(a(373),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={recipe:{instructions:"",title:"",image:"",id:0,recipe_tags:[],recipe_ingredients:[]},slug:"",isDeleted:!1,modalIsOpen:!1},a.handleDeleteRecipe=function(){var e=Object(j.a)(C.a.mark(function e(t){var n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props.api,r=a.state.recipe.id,e.next=5,n.recipeDelete(r,a.props.user.access_token);case 5:if(e.sent.ok){e.next=9;break}return console.log("DELETE ERRORRR"),e.abrupt("return");case 9:a.setState({isDeleted:!0});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleOpenModal=function(){a.setState({modalIsOpen:!0})},a.handleModalClose=function(){a.setState({modalIsOpen:!1})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(C.a.mark(function e(){var t,a,n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.pathname,a=t.substr(t.lastIndexOf("/")+1),n=this.props.api,e.next=5,n.recipeBySlug(this.props.user.access_token,a);case 5:if(r=e.sent,this.setState({recipe:r.data.recipe,slug:a}),r.ok){e.next=10;break}return console.log("RECIPE ERRORRR"),e.abrupt("return");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.isLoggedIn?this.state.isDeleted?s.a.createElement(f.a,{to:"/recipe/browse"}):s.a.createElement("div",{className:"RecipeDetail"},s.a.createElement(A,null),s.a.createElement("main",{className:"container content"},s.a.createElement("div",{className:"colums RecipeDetail__Container--Top"},s.a.createElement("button",{onClick:this.handleDeleteRecipe,className:"button"},"Delete"),s.a.createElement(E.b,{to:"/recipe/edit/".concat(this.state.slug)},s.a.createElement("button",{className:"button"},"Edit"))),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-one-third RecipeDetail__Container--Side"},s.a.createElement("h1",null,this.state.recipe.title),this.state.recipe.recipe_tags.map(function(e,t){return s.a.createElement("button",{className:"button",key:t},e.name)})),s.a.createElement("div",{className:"column RecipeDetail__Container--Main"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column RecipeDetail__Container--Ingredients"},s.a.createElement("h2",null,"Ingredients"),s.a.createElement("ul",null,this.state.recipe.recipe_ingredients.map(function(e,t){return s.a.createElement("li",{key:t},e.amount," ",e.measurement," ",e.ingredient.name)}))),s.a.createElement("div",{className:"column RecipeDetail__Container--Image"},s.a.createElement("img",{className:"image is-1by1 RecipeDetail__Image",src:N("IMAGE_PREFIX")+this.state.recipe.image||N("FALLBACK_IMAGE"),alt:""}))),s.a.createElement("h2",null,"Instructions"),s.a.createElement("p",null,this.state.recipe.instructions))),s.a.createElement("div",{className:"colums RecipeDetail__Container--Bottom"},s.a.createElement("button",{onClick:this.handleOpenModal,className:"button"},"Add to week"))),s.a.createElement(L,{copyrightText:""}),this.state.modalIsOpen&&s.a.createElement(Ce,{text:"Add meal to weekly plan",recipe:this.state.recipe,onClose:this.handleModalClose})):s.a.createElement(f.a,{to:"/"})}}]),t}(r.Component)),Re=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{}})(xe),Te=function(e){return s.a.createElement("div",{className:"termsandconditions"},s.a.createElement("h1",null,"Terms and conditions"))},Ae=(a(374),H.object().shape({title:H.string().required("Title is required!"),instructions:H.string().required("Instructions is required!"),ingredients:H.array().required("Ingredients are required!")})),Le=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).handleAddItem=function(e){e.preventDefault();var t=a.state.ingredients;t=[].concat(Object(w.a)(t),[{amount:0,measurement:"",ingredient:""}]),a.setState({ingredients:t})},a.handleIngredientChange=function(e){a.setState({ingredients:e})},a.handleInputFileChange=function(e){a.setState({isImageChanged:!0});var t=e.target.files||[];if(t.length>0){var n=t[0],r=new FileReader;r.onload=function(e){"string"===typeof r.result&&a.setState({image:r.result})},r.readAsDataURL(n)}},console.log(e.recipe),a.state={title:e.recipe.title,image:N("IMAGE_PREFIX")+e.recipe.image||N("FALLBACK_IMAGE"),instructions:e.recipe.instructions,ingredients:[fe],isImageChanged:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onSubmit,a={title:this.state.title,image:this.props.recipe.image||"",instructions:this.props.recipe.instructions||"",ingredients:this.props.recipe.ingredients||[fe]};return s.a.createElement("div",{className:"RecipeForm"},s.a.createElement(V.c,{initialValues:a,validationSchema:Ae,onSubmit:function(a,n){t({title:a.title,image:e.state.isImageChanged?e.state.image:"",instructions:a.instructions,ingredients:a.ingredients},n)},render:function(t){return s.a.createElement(V.b,null,s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("figure",{className:"image is-128x128"},s.a.createElement("img",{id:"imagePreview",src:e.state.image,alt:""}))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"file is-boxed"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:e.handleInputFileChange,accept:"image/*"}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Choose an image\u2026"))))),t.errors.image&&s.a.createElement("p",{className:"help is-danger"},t.errors.image)),s.a.createElement("label",null,"Title"),s.a.createElement(K,{name:"title",className:"",type:"text",placeholder:"Title",value:t.values.title,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.title&&t.errors.title||""}),s.a.createElement("label",null,"Ingredients"),s.a.createElement(Ee,{items:t.values.ingredients,onChange:function(e){return t.setFieldValue("ingredients",e)}}),t.errors.ingredients&&s.a.createElement("p",{className:"help is-danger"},t.errors.ingredients),s.a.createElement("div",{className:"control"},s.a.createElement("label",null,"Instructions"),s.a.createElement(V.a,{component:"textarea",className:"textarea",name:"instructions",value:t.values.instructions,onChange:t.handleChange,onBlur:t.handleBlur,error:t.touched.instructions&&t.errors.instructions||"",placeholder:"Instructions"}),t.errors.instructions&&s.a.createElement("p",{className:"help is-danger"},t.errors.instructions)),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button",type:"submit"},"Create"))),s.a.createElement("button",{className:"button",disabled:!0},"Preview"))}}))}}]),t}(r.Component),Be=(a(375),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).url=window.location.pathname,a.state={slug:a.url.substr(a.url.lastIndexOf("/")+1),tags:[],selectedTags:[],recipe:{title:"",image:"",instructions:"",ingredients:[]}},a.handleSubmit=function(){var e=Object(j.a)(C.a.mark(function e(t,n){var r,s,i,l;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("RecipeEdit.handleSubmit"),console.log(t),r=a.props.api,n.setSubmitting(!0),console.log(a.state.selectedTags),e.next=7,r.recipeUpdate({instructions:t.instructions,title:t.title,tags:a.state.selectedTags,slug:a.state.slug},a.props.user.access_token);case 7:if(s=e.sent,n.setSubmitting(!1),s.ok){e.next=12;break}return n.setErrors({general:"Fel, kunde inte updatera recept"}),e.abrupt("return");case 12:return n.setSubmitting(!0),i=s.data.recipe.id,e.next=16,r.recipeIngredientUpdate({ingredients:t.ingredients,recipe_id:i},a.props.user.access_token);case 16:return e.next=18,r.recipeImage({image:t.image,recipe_id:i},a.props.user.access_token);case 18:if(l=e.sent,n.setSubmitting(!1),l.ok){e.next=23;break}return n.setErrors({general:"Fel, kunde inte spara bild"}),e.abrupt("return");case 23:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleToggleTag=function(e){var t=a.state.selectedTags;t=t.includes(e.id)?t.filter(function(t){return t!==e.id}):[e.id].concat(Object(w.a)(t)),a.setState({selectedTags:t})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(C.a.mark(function e(){var t,a,n,r,s,i,l,c=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(De(this.state.recipe)),console.log(this.state.recipe),t=this.props.api,e.next=5,t.recipeTags(this.props.user.access_token);case 5:if(a=e.sent,this.setState({tags:a.data}),a.ok){e.next=10;break}return console.log("TAG ERRORRR"),e.abrupt("return");case 10:return e.next=12,t.recipeBySlug(this.props.user.access_token,this.state.slug);case 12:if((n=e.sent).ok){e.next=16;break}return console.log("RECIPE ERRORRR"),e.abrupt("return");case 16:r=n.data.recipe.recipe_tags,s=r.map(function(e){return e.id}),this.setState({selectedTags:s}),i=n.data.recipe.recipe_ingredients.map(function(e){return{amount:e.amount,measurement:e.measurement,ingredient:e.ingredient.name}}),l={title:n.data.recipe.title,image:n.data.recipe.image,instructions:n.data.recipe.instructions,ingredients:i},this.setState({recipe:l},function(){console.log(De(c.state.recipe))}),console.log(this.state.recipe);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.isLoggedIn?s.a.createElement("div",{className:"CreateRecipe"},s.a.createElement(A,null),s.a.createElement("main",{className:"container"},s.a.createElement("div",{className:"CreateRecipe__Container columns"},s.a.createElement("div",{className:"CreateRecipe__Container--Left column is-two-fifths"},"Edit Recipe",s.a.createElement(me,{tags:this.state.tags,selectedTags:this.state.selectedTags,onToggleTag:this.handleToggleTag})),s.a.createElement("div",{className:"CreateRecipe__Container--Right column"},this.state.recipe&&!De(this.state.recipe)&&s.a.createElement(Le,{recipe:this.state.recipe,onSubmit:this.handleSubmit})))),s.a.createElement(L,{copyrightText:""})):s.a.createElement(f.a,{to:"/"})}}]),t}(r.Component)),De=function(e){return Object.values(e).every(function(e){return null===e||""===e||0===e.length})},Me=Object(c.b)(function(e){return{user:e.user,isLoggedIn:null!==e.user.access_token}},function(e){return{}})(Be),qe=(a(376),function(e){var t=y.create(N("API_URL"));return function(a){return s.a.createElement(e,Object.assign({api:t},a))}}),Fe=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(E.a,null,s.a.createElement(f.d,null,s.a.createElement(f.b,{exact:!0,path:"/",component:z}),s.a.createElement(f.b,{path:"/welcome",component:qe(P)}),s.a.createElement(f.b,{path:"/register",component:qe(re)}),s.a.createElement(f.b,{path:"/login",component:qe($)}),s.a.createElement(f.b,{path:"/logout",component:ee}),s.a.createElement(f.b,{path:"/recipe/create",component:qe(_e)}),s.a.createElement(f.b,{path:"/recipe/browse",component:qe(Se)}),s.a.createElement(f.b,{path:"/recipe/detail/:slug",component:qe(Re)}),s.a.createElement(f.b,{path:"/recipe/edit/:slug",component:qe(Me)}),s.a.createElement(f.b,{path:"/password/create",component:qe(ue)}),s.a.createElement(f.b,{path:"/password/reset/:token",component:qe(le)}),s.a.createElement(f.b,{path:"/terms-and-conditions",component:Te}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=a(151),We={access_token:null},Ue={state:We,reducers:{setToken:function(e,t){return Object(pe.a)({},e,{access_token:t})},logOut:function(e){return Object(pe.a)({},We)}}},Ye=u()({whitelist:["user"],throttle:5e3,version:1}),Ge=Object(Pe.init)({models:n,plugins:[Ye]}),ze=(a(377),Object(o.getPersistor)());l.a.render(s.a.createElement(c.a,{store:Ge},s.a.createElement(m.a,{persistor:ze},s.a.createElement(Fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[153,1,2]]]);
//# sourceMappingURL=main.5831f27e.chunk.js.map